{% extends 'base.html' %}

{% block context %}
  {% if games_count == 0 %}
    <div class="container">
      <h1 class="text-center">У вас пока нет созданных игр</h1>
        <div class="d-grid gap-2 col-3 mx-auto">
          <a class="btn btn-danger" href="{% url 'new_game' %}" role="button">Создать игру</a>
        </div>
    </div>
  {% endif %}
  {% for game in games %}
    <div class="card">
      <h5 class="card-header">{{ game.title }}</h5>
      <div class="card-body">
        {% for key, value in costs.items %}
          {% if key == game.cost_limit %}
            <p class="card-text ">Стоимость подарка: {{ value }}</p>
          {% endif %}
        {% endfor %}
        <p class="card-text">Период регистрации участников: {{ game.registration_end|date:"F j, Y" }}</p>
        <p class="card-text">Период отправки подарка: {{ game.dispatch_date|date:"F j, Y" }}</p>
        {% if game.owner_joined %}
          <p class="card-text">Вы присоединились к игре</p>
        {% endif %}
        {% url 'game_join' slug=game.slug as the_url %}
        <fieldset disabled>
          <div class="mb-3 col-md-6">
            <label for="disabledTextInput" class="form-label">Ссылка на игру</label>
            <input type="text" id="disabledTextInput" class="form-control" value="{{ base_url }}{{ the_url }}">
  {#          <button type="button" class="btn-clipboard" title="" data-bs-original-title="Копировать в буфер обмена">Копировать</button>#}
          </div>
        </fieldset>
        {% if not game.owner_joined %}
          <a href="{% url 'game_join' slug=game.slug %}" class="btn btn-danger mb-3">Присоединиться к игре</a><br>
        {% endif %}
        <a href="{% url 'game_delete' slug=game.slug %}" class="btn btn-danger mb-3">Удалить игру</a>
      </div>
    </div>
  {% endfor %}
{% endblock %}